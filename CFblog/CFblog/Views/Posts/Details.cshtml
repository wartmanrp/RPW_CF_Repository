@model CFblog.Models.Post

@{
    ViewBag.Title = "Details";
}

@if (User.IsInRole("Admin")) 
{ 
<p>
@Html.ActionLink("Edit", "Edit", new { id = Model.Id }) |
@Html.ActionLink("Delete", "Delete", new { id = Model.Id }) |
@Html.ActionLink("Back to List", "Index")
</p> 
}



<div class="blog-page blog-item">
    <!--Blog Post-->
    <div class="blog margin-bottom-40">
    <div class="blog-img">
        @if (Model.MediaUrl != null)
        {
            <img class="img-responsive center" src="@Url.Content(Model.MediaUrl)" alt="" />
        }
    </div>
    <h2>
        @Html.ActionLink(Model.Title, "Details", new { id = Model.Id })
    </h2>
    <div class="blog-post-tags">
        <ul class="list-unstyled list-inline blog-info">
            <li><i class="fa fa-calendar"></i> @Model.Created </li>
            <li><i class="fa fa-pencil"></i> Powers Wartman </li>
            <li>
                <i class="fa fa-tags"></i>
                @foreach (var item in Model.Categories)
                    {
                    @item.Name
                    }
            </li>
        </ul>
    </div>


    <p>@Html.Raw(Model.Body)</p><br>



        <!--Comments Display-->
        <div class="media">
            <div class="row">
                <h3 class="col-md-6 pull-left">Comments</h3>
                <div class="col-md-6 text-right">
                        @Html.ActionLink("New Comment", "Create", "Comments", new { id = @Model.Id }, new { @class = "btn btn-success" })
                </div>

            </div>
            @foreach (var comment in Model.Comments)
            {
                if (!comment.MarkForDeletion)
                {
                    <a class="pull-left" href="#">
                        <img class="media-object" src="~/assets/img/site logo-sm.png" alt="" />
                    </a>
                    <div class="media-body">
                        <h4 class="media-heading">@comment.Author<span>@comment.Created</span></h4>
                        <p>@comment.Body
                            @if (User.IsInRole("Admin") || User.IsInRole("Moderator"))
                            {
                                <div class="pull-right">
                                    @Html.ActionLink("Delete", "Delete", "Comments", new { id = @comment.Id, postId = @Model.Id }, null)
                                </div>
                            }

                        </p>





                        <hr>
                    </div>
                }                   
            }
        </div>
        <!--End Comments Display-->
    </div>
</div>
